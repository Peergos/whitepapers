% Use only LaTeX2e, calling the article.cls class and 12-point type.

\documentclass[12pt]{article}

% Users of the {thebibliography} environment or BibTeX should use the
% scicite.sty package, downloadable from *Science* at
% www.sciencemag.org/about/authors/prep/TeX_help/ .
% This package should properly format in-text
% reference calls and reference-list numbers.

\usepackage{scicite}

% Use times if you have the font installed; otherwise, comment out the
% following line.

\usepackage{times}

% The preamble here sets up a lot of new/revised commands and
% environments.  It's annoying, but please do *not* try to strip these
% out into a separate .sty file (which could lead to the loss of some
% information when we convert the file to other formats).  Instead, keep
% them in the preamble of your main LaTeX source file.


% The following parameters seem to provide a reasonable page setup.

\topmargin 0.0cm
\oddsidemargin 0.2cm
\textwidth 16cm 
\textheight 21cm
\footskip 1.0cm


%The next command sets up an environment for the abstract to your paper.

\newenvironment{sciabstract}{%
\begin{quote} \bf}
{\end{quote}}


% If your reference list includes text notes as well as references,
% include the following line; otherwise, comment it out.

\renewcommand\refname{References and Notes}

% The following lines set up an environment for the last note in the
% reference list, which commonly includes acknowledgments of funding,
% help, etc.  It's intended for users of BibTeX or the {thebibliography}
% environment.  Users who are hand-coding their references at the end
% using a list environment such as {enumerate} can simply add another
% item at the end, and it will be numbered automatically.

\newcounter{lastnote}
\newenvironment{scilastnote}{%
\setcounter{lastnote}{\value{enumiv}}%
\addtocounter{lastnote}{+1}%
\begin{list}%
{\arabic{lastnote}.}
{\setlength{\leftmargin}{.22in}}
{\setlength{\labelsep}{.5em}}}
{\end{list}}


% Include your paper's title here

\title{Peergos Architecture} 


% Place the author information here.  Please hand-code the contact
% information and notecalls; do *not* use \footnote commands.  Let the
% author contact information appear immediately below the author names
% as shown.  We would also prefer that you don't change the type-size
% settings shown here.

\author
{Ian Preston,$^{1\ast}$ Christoph Boddy,$^{1}$ Kevin O'Dwyer$^{1}$\\
\\
\normalsize{$^{1}$Peergos Foundation,}\\
\normalsize{Oxford, UK}\\
\\
\normalsize{$^\ast$Correspondence to; e-mail:  ianopolous@gmail.com.}
}

% Include the date command, but leave its argument blank.

\date{}



%%%%%%%%%%%%%%%%% END OF PREAMBLE %%%%%%%%%%%%%%%%



\begin{document} 

% Double-space the manuscript.

\baselineskip24pt

% Make the title.

\maketitle 



% Place your abstract within the special {sciabstract} environment.

\begin{sciabstract}
        ABSTRACT  HERE.
\end{sciabstract}


\section*{Introduction}

\subsection*{Motivation}


\subsection*{Goals}
Peergos aims to give people back control over their data and communications. It is a private, secure place to store files, share files and communicate, but without exposing data or the freindship graph to any third parties. 

To do this it needs a fully decentralized architecture without any central dependencies, strong crypto, and strongmetadata protection. 

\section*{Components}
Peergos is composed of several layers.

\begin{enumerate}
\item A content addressed peer-to-peer storage layer
\item Erasure codes for redundancy and fault tolerance
\item A mutable layer containing pointers into the immutable layer, with writes controlled by public-key cryptography
\item Strong encryption
\item A cryptographic sharing mechanism for granting read or write access to a file
\item A username registry for looking up public keys and sending follow requests
\end{enumerate}

\subsection*{InterPlanetary Filesystem (IPFS)}
IPFS forms the peer-to-peer content addressed storage layer. All data except for the usernames and follow requests in layer 6 are stored here. 

When a block of data is written to IPFS a hash of the data is returned (currently SHA2-256). This hash is then the address of that data. Any IPFS node can ask the network for a hash, and any node that has the data corresponding to that hash can serve it. Due to the immutability, data can be cached forever. 

As well as raw data, objects in IPFS can also have links to other objects via their hash. In this way a merkle-tree can be constructed with a single root hash. 

\subsection*{InterPlanetary Naming System (IPNS)}
IPNS is essentially a mapping from public key to a hash. Each update to the hash is signed by the private key corresponding to the public key. 

\subsection*{Core Node}
The core nodes handle the unique mapping from username to public key, as well as storing any pending follow requests. Currently this is a central server, but this will eventually be replaced by a distributed blockchain. 

\section*{Cryptography}
All cryptography currently uses TweetNaCl (salsa20 + poly1305 and Ed25519/Curve25519). 

\subsection*{Primitives}
The cryptographic primitives used are those of TweetNaCl, secretbox, secretbox\_open, sign, unsign, box, box\_open.

\subsection*{Cryptree}
%metadata hiding

\subsubsection*{Read access}

\subsection*{Capabilities}

\subsection*{Login}

\subsection*{Plausible deniability}

\subsection*{Post quantum}

\section*{Write access}

\section*{Sharing}

\subsection*{Follow requests}

\subsection*{Public links}

\section*{Threat models}

\subsection*{Passive network adversary}
\subsection*{Active network adversary}
\subsection*{Casual user}
\subsection*{Security conscious user}%phrase TBC

\section*{Conclusion}

\subsection*{Future work}

\end{document}
